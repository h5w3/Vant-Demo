webpackJsonp([8],{"2Rzu":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("Xxa5"),s=a.n(i),n=a("Gu7T"),o=a.n(n),c=a("exGp"),r=a.n(c),l=a("TQvf"),h=a.n(l),p=a("4vvA"),d=a.n(p),u=a("gm1x"),v={components:{NoDataText:a("/7ID").a},data:function(){return{popupShow:!1,url:"『北欧优品，好货精选』https://www.40hs.com",cateId:null,cateName:"",loadingShow:!0,finished:!1,noDataTextShow:!1,pageNum:1,pageSize:10,list:[],childCates:[{id:"-1",name:"推荐"}],childCatesShow:!1,flag:"cate_big",cateIndex:-1}},created:function(){this.cateId=this.$route.params.cateId,this.getCateItemsList()},methods:{goHome:function(){this.$router.push({name:"home"})},goCart:function(){this.$router.push({name:"cart"})},share:function(){this.popupShow=!0},copyShare:function(){var t=this,e=new h.a(".btn");e.on("success",function(e){d()("复制成功"),t.popupShow=!1}),e.on("error",function(t){d()("复制失败，请手动复制")})},gotoSearchPage:function(){this.$router.push({name:"search"})},onClickLeft:function(){this.$router.push({name:"cate"})},getCateItemsList:function(){var t=this;return r()(s.a.mark(function e(){var a,i,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingShow=!0,a={cate_id:t.cateId,page_num:t.pageNum,page_size:t.pageSize},e.next=4,Object(u.j)(a);case 4:0===(i=e.sent).code&&i.data&&(n=i.data,""==t.cateName&&(t.cateName=i.cate_name,t.childCates=[].concat(o()(t.childCates),o()(i.child_cates)),t.url="『北欧优品』精选"+t.cateName+"，链接地址："+window.location.href+"?f=share"),t.childCates.length>1&&(t.childCatesShow=!0,document.getElementById("list").style.marginTop="92px"),0===n.length?(t.noDataTextShow=!0,t.finished=!0):(t.list=[].concat(o()(t.list),o()(n)),t.pageNum++)),t.loadingShow=!1;case 7:case"end":return e.stop()}},e,t)}))()},getChildItemsList:function(){var t=this;return r()(s.a.mark(function e(){var a,i,n,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.cateIndex,t.loadingShow=!0,i={child_cate_id:t.childCates[a].id,page_num:t.pageNum,page_size:t.pageSize},e.next=5,Object(u.j)(i);case 5:0===(n=e.sent).code&&n.data&&(0===(c=n.data).length?(t.noDataTextShow=!0,t.finished=!0):(t.list=[].concat(o()(t.list),o()(c)),t.pageNum++)),t.loadingShow=!1;case 8:case"end":return e.stop()}},e,t)}))()},getChildItems:function(t,e){return this.cateIndex=t,-1==this.childCates[t].id?(this.list=[],this.flag="cate_big",this.pageNum=1,this.finished=!1,this.getCateItemsList(),!1):(this.list=[],this.flag="cate_child",this.pageNum=1,this.finished=!1,this.getChildItemsList(t),!1)},loadMore:function(){this.loadingShow=!0,"cate_big"===this.flag&&this.getCateItemsList(),"cate_child"===this.flag&&this.getChildItemsList()},finalPrice:function(t,e){if(!e)return t;try{return(t-(e?e.split("减")[1]:"").split("元")[0]).toFixed(2)}catch(t){}}},destroyed:function(){}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"cate-items"}},[i("van-nav-bar",{attrs:{title:t.cateName,"left-text":"返回","right-text":"分享","left-arrow":"",fixed:""},on:{"click-left":t.onClickLeft}},[i("van-icon",{staticStyle:{"margin-right":"18px","font-size":"20px"},attrs:{slot:"right",name:"search"},on:{click:function(e){t.$router.push({name:"search"})}},slot:"right"}),t._v(" "),i("van-icon",{staticStyle:{"margin-right":"2px"},attrs:{slot:"right",name:"share"},on:{click:t.share},slot:"right"})],1),t._v(" "),i("div",{staticStyle:{width:"100%"}},[i("van-popup",{staticClass:"sharePopup",model:{value:t.popupShow,callback:function(e){t.popupShow=e},expression:"popupShow"}},[i("van-notice-bar",{attrs:{scrollable:!1}},[t._v("分享给好友\n\t\t")]),t._v(" "),i("p",{attrs:{id:"shareTxt"},domProps:{textContent:t._s(t.url)}}),t._v(" "),i("van-button",{staticClass:"btn",staticStyle:{width:"94%",margin:"8px auto 0",height:"44px","font-size":"16px"},attrs:{"data-clipboard-target":"#shareTxt",type:"danger"},on:{click:t.copyShare}},[t._v("复制链接分享")])],1)],1),t._v(" "),i("van-tabs",{directives:[{name:"show",rawName:"v-show",value:t.childCatesShow,expression:"childCatesShow"}],staticStyle:{position:"fixed",top:"46px",left:"0",height:"46px","line-height":"46px",width:"100%","z-index":"1000"},on:{click:t.getChildItems}},t._l(t.childCates.length,function(e){return i("van-tab",{key:e,attrs:{title:t.childCates[e-1].name}})})),t._v(" "),i("div",{attrs:{id:"list"}},[i("ul",[i("van-list",{attrs:{finished:t.finished,offset:200},on:{load:t.loadMore},model:{value:t.loadingShow,callback:function(e){t.loadingShow=e},expression:"loadingShow"}},t._l(t.list,function(e){return i("li",[i("router-link",{attrs:{to:"/item/"+e.num_iid}},[i("van-card",{attrs:{title:e.title,thumb:e.thumb_pic_url?e.thumb_pic_url:e.pict_url}},[i("div",{attrs:{slot:"desc"},slot:"desc"},[i("div",{staticClass:"shop-type"},[1==e.user_type?i("img",{staticClass:"shop-type-pic",attrs:{src:a("QSUK")}}):i("img",{staticClass:"shop-type-pic",attrs:{src:a("HhO2")}})]),t._v(" "),i("div",{staticClass:"tags"},[t._l(e.tags,function(e){return[i("van-tag",{attrs:{plain:"",type:"primary"}},[t._v(t._s(e.name))])]})],2),t._v(" "),i("div",{staticClass:"quan"},[i("van-tag",{directives:[{name:"show",rawName:"v-show",value:e.coupon_info,expression:"item.coupon_info"}],attrs:{plain:"",type:"danger"}},[i("span",{staticClass:"quan-head"},[t._v("券")]),t._v("\n\t\t\t\t  \t\t\t\t"+t._s(e.coupon_info?e.coupon_info.split("减")[1]:"")+"\n\t\t\t\t  \t\t\t")])],1),t._v(" "),i("div",{staticClass:"volume"},[t._v("\n\t\t\t\t  \t\t\t\t"+t._s(e.volume)+"人已买\n\t\t\t  \t\t\t")]),t._v(" "),i("div",{staticClass:"price"},[i("div",{staticClass:"final-price"},[t._v("\n\t\t\t\t  \t\t\t\t￥"),i("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.finalPrice(e.zk_final_price_wap,e.coupon_info)))])]),t._v(" "),i("div",{staticClass:"reserve-price"},[t._v("\n\t\t\t\t  \t\t\t\t￥"+t._s(e.reserve_price)+"\n\t\t\t\t  \t\t\t")])])])])],1)],1)}))],1),t._v(" "),i("div",{staticClass:"loading"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.noDataTextShow,expression:"noDataTextShow"}],staticClass:"no-data-text"},[i("no-data-text")],1)])]),t._v(" "),i("div",{staticClass:"home-btn",on:{click:t.goHome}},[i("van-icon",{staticStyle:{"font-size":"20px",color:"#555"},attrs:{name:"home"}}),t._v(" "),i("span",{staticStyle:{color:"#666","font-size":"10px",position:"fixed",bottom:"20px",left:"32px"}},[t._v("首页")])],1),t._v(" "),i("div",{staticClass:"cart-btn",on:{click:t.goCart}},[i("van-icon",{staticStyle:{"font-size":"20px",color:"#555"},attrs:{name:"cart"}}),t._v(" "),i("span",{staticStyle:{color:"#666","font-size":"10px",position:"fixed",bottom:"78px",left:"32px"}},[t._v("收藏")])],1)],1)},staticRenderFns:[]};var m=a("VU/8")(v,f,!1,function(t){a("Rbql")},null,null);e.default=m.exports},Rbql:function(t,e){}});